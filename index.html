<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>kizuna 接続テスト 02</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <h1>kizuna Database Test 02</h1>
    <div id="output">読み込み中...</div>

    <script>
        alert("check 02");
        // ライブラリ名と被らないように、変数を 'sbClient' に変更
        const SUPABASE_URL = 'https://jnordvkkajlengzfaxzj.supabase.co';
        const SUPABASE_KEY = 'sb_publishable_jpR2JZ7Mue2EPEqELM71iw_AcwermIp';

        // 初期化
        const sbClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        async function getData() {
            // 'test_log' テーブルからデータを取得
            const { data, error } = await sbClient
                .from('test_log')
                .select('*');

            const outputDiv = document.getElementById('output');

            if (error) {
                outputDiv.innerText = 'エラー: ' + error.message;
            } else if (data && data.length > 0) {
                // 成功：データを表示
                outputDiv.innerText = JSON.stringify(data, null, 2);
            } else {
                // データが空の場合
                outputDiv.innerText = '接続成功：データはまだありません。';
            }
        }

        getData();
    </script>
</body>
</html>
