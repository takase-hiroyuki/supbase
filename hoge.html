<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>JS SVG Stamp</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: sans-serif;
            background-color: #f0f0f0;
        }
        /* SVGエリアの枠線 */
        svg {
            background-color: white;
            border: 2px solid #333;
            cursor: crosshair;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        /* 追加された円（circle）にアニメーションをつけることも簡単 */
        circle {
            transition: r 0.2s; /* 半径の変化をアニメーション */
        }
        circle:hover {
            opacity: 0.8;
            stroke: #333;
            stroke-width: 2px;
        }
    </style>
</head>
<body>

    <h2>SVGでスタンプ</h2>
    <p>クリックすると、HTMLの要素として円が追加されます。</p>
    <svg id="mySvg" width="500" height="400"></svg>
    <button onclick="clearSvg()" style="margin-top: 10px;">リセット</button>

    <script>
        const svg = document.getElementById('mySvg');
        const svgNS = "http://www.w3.org/2000/svg"; // SVGを作るためのおまじない

        svg.addEventListener('click', function(event) {
            // 座標計算（Canvasと同じ）
            const rect = svg.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;

            createCircle(x, y);
        });

        function createCircle(x, y) {
            // 1. <circle> というタグを作る
            // HTMLのタグと少し違う作り方をします（createElementNSが必要）
            const circle = document.createElementNS(svgNS, "circle");

            // 2. 属性（設定）を入れる
            circle.setAttribute("cx", x);  // 中心のX座標
            circle.setAttribute("cy", y);  // 中心のY座標
            circle.setAttribute("r", 20);  // 半径
            
            // 色をランダムに
            const color = `hsl(${Math.random() * 360}, 70%, 60%)`;
            circle.setAttribute("fill", color);

            // 3. SVGの中に「子要素」として追加する
            svg.appendChild(circle);
        }

        function clearSvg() {
            // 中身を空っぽにする
            svg.innerHTML = '';
        }
    </script>
</body>
</html>
